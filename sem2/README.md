# –°—Ç—É–¥–µ–Ω—Ç–∫–∞ –≥—Ä—É–ø–ø—ã –ú8–û-408–ë-21 –°—É–ª—è–µ–≤–∞ –ê–ª–∏–Ω–∞ –ò–≥–æ—Ä–µ–≤–Ω–∞
–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–µ —Ä–∞–±–æ—Ç—ã 6-8 –ø–æ –∫—É—Ä—Å—É "–ú–µ—Ç–æ–¥—ã, —Å—Ä–µ–¥—Å—Ç–≤–∞ –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –º—É–ª—å—Ç–∏–º–µ–¥–∏–∞"

–î–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω–æ–π –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç—ã –±—ã–ª –≤—ã–±—Ä–∞–Ω –¥–∞—Ç–∞—Å–µ—Ç Blood Cell Count and Detection.
BCCD Dataset ‚Äî —ç—Ç–æ –Ω–µ–±–æ–ª—å—à–æ–π, –Ω–æ —à–∏—Ä–æ–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –¥–∞—Ç–∞—Å–µ—Ç –¥–ª—è –∑–∞–¥–∞—á –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∏ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫–ª–µ—Ç–æ–∫ –∫—Ä–æ–≤–∏. –û–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç 364 –º–∏–∫—Ä–æ—Å–∫–æ–ø–∏—á–µ—Å–∫–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è–º–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ PASCAL VOC, –æ—Ö–≤–∞—Ç—ã–≤–∞—é—â–∏–º–∏ —Ç—Ä–∏ –∫–ª–∞—Å—Å–∞:
- RBC (—ç—Ä–∏—Ç—Ä–æ—Ü–∏—Ç—ã)
- WBC (–ª–µ–π–∫–æ—Ü–∏—Ç—ã)
- Platelets (—Ç—Ä–æ–º–±–æ—Ü–∏—Ç—ã)

BCCD –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è—Ö, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é –∞–Ω–∞–ª–∏–∑–∞ –∫—Ä–æ–≤–∏, —á—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–π, —Ç–∞–∫–∏—Ö –∫–∞–∫ –ª–µ–π–∫–µ–º–∏—è. –¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã –∞–Ω–∞–ª–∏–∑–∞ –∫—Ä–æ–≤–∏ —Ç—Ä–µ–±—É—é—Ç —Ä—É—á–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤, —á—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç—Ä—É–¥–æ–µ–º–∫–∏–º –∏ –ø–æ–¥–≤–µ—Ä–∂–µ–Ω–Ω—ã–º –æ—à–∏–±–∫–∞–º. –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —ç—Ç–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å –ø–æ–º–æ—â—å—é –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–≥–æ –∑—Ä–µ–Ω–∏—è –∏ –≥–ª—É–±–æ–∫–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç:
- –°–Ω–∏–∑–∏—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π –ø–µ—Ä—Å–æ–Ω–∞–ª
- –£–≤–µ–ª–∏—á–∏—Ç—å —Ç–æ—á–Ω–æ—Å—Ç—å –∏ —Å–∫–æ—Ä–æ—Å—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- –û–±–µ—Å–ø–µ—á–∏—Ç—å –æ–±—ä–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

 ![example](https://github.com/user-attachments/assets/298c4387-0b16-4822-906a-c872fc854744)

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ `BCCD_dataset`

  ```
  ‚îú‚îÄ‚îÄ BCCD
  ‚îÇ   ‚îú‚îÄ‚îÄ Annotations
  ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ BloodImage_00XYZ.xml (364 items)
  ‚îÇ   ‚îú‚îÄ‚îÄ ImageSets       # Contain four Main/*.txt which split the dataset
  ‚îÇ   ‚îî‚îÄ‚îÄ JPEGImages
  ‚îÇ       ‚îî‚îÄ‚îÄ BloodImage_00XYZ.jpg (364 items)
  ‚îú‚îÄ‚îÄ dataset
  ‚îÇ   ‚îî‚îÄ‚îÄ mxnet           # Some preprocess scripts for mxnet
  ‚îú‚îÄ‚îÄ scripts
  ‚îÇ   ‚îú‚îÄ‚îÄ split.py        # A script to generate four .txt in ImageSets
  ‚îÇ   ‚îî‚îÄ‚îÄ visualize.py    # A script to generate labeled img like example.jpg
  ‚îú‚îÄ‚îÄ example.jpg         # A example labeled img generated by visualize.py
  ‚îú‚îÄ‚îÄ LICENSE
  ‚îî‚îÄ‚îÄ README.md
  ```

  `JPEGImages`:

  * **Image Type** : *jpeg(JPEG)*
  * **Width** x **Height** : *640 x 480*

–ê–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ VOC (.xml) –¥–ª—è –∑–∞–¥–∞—á–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å –ø–æ–º–æ—â—å—é –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ —Ä–∞–∑–º–µ—Ç–∫–∏. –ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥—ë–Ω –ø—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞ .xml.

  ```xml
  <annotation>
  	<folder>JPEGImages</folder>
  	<filename>BloodImage_00000.jpg</filename>
  	<path>/home/pi/detection_dataset/JPEGImages/BloodImage_00000.jpg</path>
  	<source>
  		<database>Unknown</database>
  	</source>
  	<size>
  		<width>640</width>
  		<height>480</height>
  		<depth>3</depth>
  	</size>
  	<segmented>0</segmented>
  	<object>
  		<name>WBC</name>
  		<pose>Unspecified</pose>
  		<truncated>0</truncated>
  		<difficult>0</difficult>
  		<bndbox>
  			<xmin>260</xmin>
  			<ymin>177</ymin>
  			<xmax>491</xmax>
  			<ymax>376</ymax>
  		</bndbox>
  	</object>
      ...
  	<object>
  		...
  	</object>
  </annotation>
  ```

### –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ø–æ –≤—Å–µ–º –º–æ–¥–µ–ª—è–º

### üìä –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ø–æ –≤—Å–µ–º –º–æ–¥–µ–ª—è–º

| –ó–∞–¥–∞—á–∞         | –ú–µ—Ç—Ä–∏–∫–∞       | –ë–∞–∑–æ–≤—ã–π                     | –£–ª—É—á—à–µ–Ω–Ω—ã–π –±–µ–π–∑–ª–∞–π–Ω         | –ò–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—è              |
|----------------|----------------|-----------------------------|-----------------------------|----------------------------|
| **–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è** | **F1-score**    | **1.0000 (ViT)**             | 0.9951 (ViT)                | 1.0000 (ResNet)            |
|                | **Loss**       | **0.0114 (ResNet)**          | 0.0239 (ViT)                | 0.0114 (ResNet)            |
|                | Accuracy       | 100.00%                      | 99.80%                      | 100.00%                    |
| **–î–µ—Ç–µ–∫—Ü–∏—è WBC** | Precision      | 0.968                        | **0.979**                   | 0.804                      |
|                | F1-score       | 0.984                        | **0.994**                   | 0.981                      |
|                | mAP@0.5        | **0.994**                    | 0.802                       | 0.767                      |
| **–î–µ—Ç–µ–∫—Ü–∏—è RBC** | Precision      | **0.727**                    | 0.673                       | 0.624                      |
|                | F1-score       | 0.781                        | 0.791                       | **0.817**                  |
|                | mAP@0.5        | **0.853**                    | 0.513                       | 0.541                      |
| **–î–µ—Ç–µ–∫—Ü–∏—è Platelets** | Precision | 0.874                        | **1.000** (overfit)         | 0.868                      |
|                | F1-score       | **0.854**                    | 0.366                       | 0.738                      |
|                | mAP@0.5        | **0.895**                    | 0.200                       | 0.342                      |
| **–°–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è** | IoU           | 0.3403 (UNet)                | 0.3352 (DeepLabV3+)         | **0.4025 (CustomUNet)**    |
|                | Dice           | 0.4974 (UNet)                | 0.4897 (DeepLabV3+)         | **0.5633 (CustomUNet)**    |
|                | Train Loss     | 0.6749 (UNet)                | **0.6359 (DeepLabV3+)**     | 0.9843                     |
|                | Val Loss       | 1.1291 (UNet)                | **0.7369 (DeepLabV3+)**     | 1.0129                     |



###  –í—ã–≤–æ–¥

* **–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è**: –ë–∞–∑–æ–≤—ã–µ –º–æ–¥–µ–ª–∏ (ResNet18 –∏ ViT) –ø–æ–∫–∞–∑–∞–ª–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π F1, –Ω–æ —É–ª—É—á—à–µ–Ω–Ω—ã–µ ‚Äî –±–æ–ª–µ–µ —É—Å—Ç–æ–π—á–∏–≤—ã–µ –∏ –º–µ–Ω–µ–µ —Å–∫–ª–æ–Ω–Ω—ã –∫ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—é.
* **–î–µ—Ç–µ–∫—Ü–∏—è**: –£–ª—É—á—à–µ–Ω–Ω—ã–π –±–µ–π–∑–ª–∞–π–Ω –ø—Ä–µ–≤–æ—Å—Ö–æ–¥–∏—Ç –ø–æ WBC, –Ω–æ –ø—Ä–æ–≤–∞–ª–∏–≤–∞–µ—Ç—Å—è –ø–æ Platelets. –ò–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—è –¥–∞—ë—Ç –ª—É—á—à–∏–π F1 –ø–æ RBC.
* **–°–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è**: CustomUNet ‚Äî –ª–∏–¥–µ—Ä –ø–æ IoU –∏ Dice, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏–µ –ø–æ—Ç–µ—Ä–∏.


### –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏. –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –µ–≥–æ (–ø–æ –∂–µ–ª–∞–Ω–∏—é):

```bash
python -m venv venv
source venv/bin/activate  # –∏–ª–∏ venv\Scripts\activate –Ω–∞ Windows
```

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
pip install torch torchvision torchaudio
pip install pandas numpy opencv-python matplotlib seaborn
pip install scikit-learn albumentations segmentation-models-pytorch
pip install ultralytics
```

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –Ω—É–∂–Ω—ã–π `.ipynb` —Ñ–∞–π–ª –≤ Jupyter Notebook –∏–ª–∏ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π —Å—Ä–µ–¥–µ, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–µ–π Jupyter (–Ω–∞–ø—Ä–∏–º–µ—Ä, VS Code, Google Colab).

4. –î–ª—è –∑–∞–ø—É—Å–∫–∞:

```bash
jupyter notebook
```

–ò–ª–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª –≤ VS Code.
